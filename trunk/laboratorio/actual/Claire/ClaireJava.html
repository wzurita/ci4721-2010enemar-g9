<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.61 [en] (X11; I; Linux 2.2.13-7mdk i686) [Netscape]">
   <title>The Java Translator User's Manual</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">

<center>
<h1 STYLE="margin-top: 0cm; margin-bottom: 0cm">
The Java Translator User's Manual</h1></center>

<center><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM></center>

<h1>
<a NAME="TOC"></a>Table of Contents</h1>
<a href="#About">About the Java Translator</a>
<br><a href="#Requirements">Requirements</a>
<br><a href="#Using">Using the Java Translator</a>
<br><a href="#Command Line">Command Line Options</a>
<br><a href="#First Secction">Code In the First Section</a>
<br><a href="#Running">Runing the generated Parser</a>
<p><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM>
<h2>
<a NAME="About"></a>About the Java Translator</h2>
This translator is used along with claire, to translate a claire's parser
to the java language.
<p>Claire's Java translator is a library that converts Claire's parsers
to the java language
<br>Copyright (C) 1999 Paul Pacheco
<p>This library is free software; you can redistribute it and/or
<br>modify it under the terms of the GNU Lesser General Public
<br>License as published by the Free Software Foundation; either
<br>version 2 of the License, or (at your option) any later version.
<p>This library is distributed in the hope that it will be useful,
<br>but WITHOUT ANY WARRANTY; without even the implied warranty of
<br>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp; See the
GNU
<br>Lesser General Public License for more details.
<p>You should have received a copy of the GNU Lesser General Public
<br>License along with this library; if not, write to the Free Software
<br>Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA&nbsp; 02111-1307&nbsp;
USA
<p>Check out the <a href="LICENSE">LICENSE</a> for details.
<p><a href="#TOC">Return to Contents</a>
<p><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM>
<h2>
<a NAME="Requirements"></a>Requirements</h2>

<div CLASS="parrafo-con-sangria">In order to use the java translator, you
will need:</div>

<ul>
<li CLASS="parrafo-con-sangria" STYLE="text-indent: 0cm">
JDK 1.2 or higher. You can find it at <a href="http://java.sun.com">http://java.sun.com</a></li>
</ul>

<div CLASS="parrafo-con-sangria" STYLE="text-indent: 0cm">In order to compile
and run a program generated by the java translator, you will need:</div>

<ul>
<li CLASS="parrafo-con-sangria" STYLE="text-indent: 0cm">
The runtime library provided with the software, Runtime.jar. You need to
distribute this file along with the generated parser for it to work. Be
aware the runtime library is protected by the <a href="LICENSE">GNU Lesser
General Public License</a></li>

<li CLASS="parrafo-con-sangria" STYLE="text-indent: 0cm">
JDK 1.1 or higher. You can find it at <a href="http://java.sun.com">http://java.sun.com</a></li>
</ul>
<a href="#TOC">Return to Contents</a>
<p><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM>
<h2>
<a NAME="Using"></a>Using the translator</h2>
To use the translator, you need to tell Claire when compiling a grammar
file. This can be done in several ways:
<ul>
<li>
Don't do anything, the java translator is the default translator.</li>

<li>
Use the <tt>-l java </tt>option see the <a href="Manual.html#Command Line">Claire's
command line description</a> for details.</li>

<li>
use %lang java, see the <a href="Manual.html#First Secction">language dependant
declarations </a>for details.</li>
</ul>
After this, Claire will use the java translator to generate parsers.
<p><a href="#TOC">Return to Contents</a>
<p><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM>
<h2>
<a NAME="Command Line"></a>Command line options</h2>
Besides the <a href="Manual.html#Command Line">Claire's command line</a>,
the Java translator can recognize the following options when compiling
a file:
<br>&nbsp;
<br>&nbsp;
<table BORDER CELLSPACING=0 WIDTH="100%" NOSAVE >
<tr>
<td>
<center>
<h3>
Command line option</h3></center>
</td>

<td>
<center>
<h3>
Description</h3></center>
</td>
</tr>

<tr>
<td>
<pre STYLE="margin-left: 2cm"><tt>-c &lt;class> | --class &lt;class></tt></pre>
</td>

<td>Specify the name of the class to be generated</td>
</tr>

<tr>
<td>
<div STYLE="margin-left: 2cm"><tt>-z | --zip</tt></div>
</td>

<td>Apply extra compression to the tables using the gzip algorithm.</td>
</tr>
</table>

<p><a href="#TOC">Return to Contents</a>
<p><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM>
<h2>
<a NAME="First Secction"></a>Code in the first Section</h2>
The code in the <a href="Manual.html#First Secction">first Secction of
a grammar file </a>used by the java translator, is pretty much in the sintax
of a regular java file.
<p>Beside recognizing comments and white spaces, the general form is:
<br>&nbsp;
<blockquote>
<pre><tt>package declaration
imports
class Declaration</tt></pre>
</blockquote>
Note that all of this is optional.
<p>The package declaration is a regular package declaracion found in java
source files.
<br>The imports are a list of imported packages, in the same format as
in java
<br>The class declaration consists of a class declaration. It MAY NOT BE
AN INTERFACE. The name of the declared class will be the name of the generated
parser. Any code inside the class declaration will be placed directly inside
the parser, and can be used by the <a href="Manual.html#actions">semantic
actions</a>.&nbsp; The class declaration can include implementations and
extends, can be abstract or final, or anything a class can be in Java.
<br>Here are some examples of what can be placed in the first section:
<blockquote>
<pre STYLE="margin-bottom: 0.5cm"><tt>/*
&nbsp;* This code is written in java.
&nbsp;*/

/*
&nbsp;* the code will be generated in the default package. therefore
&nbsp;* this is commented, uncomment it if you wanted to generated the
&nbsp;* parser in a package
&nbsp;*/

//package pepe;

/* this imports the java.util package
&nbsp;* just like in any java source file
&nbsp;*/
import java.util.*;
import java.io.*;

/*&nbsp;
&nbsp;* this is the class declaration. The parser will be called MyParser
&nbsp;* since the class is public, the generated parser will be public
&nbsp;*/
public class MyParser
{

&nbsp;&nbsp; /*&nbsp;
&nbsp;&nbsp;&nbsp; * a variable that will contain the variables of the language
&nbsp;&nbsp;&nbsp; * This can be used just like a regular variable inside the semantic
&nbsp;&nbsp;&nbsp; * actions
&nbsp;&nbsp;&nbsp; */
&nbsp;&nbsp; Map variables = new HashMap;

}</tt></pre>
</blockquote>
<a href="#TOC">Return to Contents</a>
<center>
<p><img SRC="blurulr6.gif" NAME="Imagen3" BORDER=0 height=5 width=640 align=BOTTOM></center>

<h2>
<a NAME="Running"></a>Running the generated Parser</h2>
By default, the generated parser will have a main method that invokes the
parser. This allows for easy testing of the grammar. Just compile and run
the generated parser, and it will read it's input from the standard input,
or a given file in the command line.
<p>On the other hand, on most common cases, it is desirable to start the
parser from withing a program. To start the parser from java code, just
create an object of the parser class, and call the "parse" method with
an input stream. The result will be the result of the top symbol. For example.
Consider the calculator example:
<blockquote>
<pre>class Calculator

<tt>&lt;int> expr: expr "\+" expr %left 100 { $$ = $1 + $3; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | expr "\-" expr %left 100 { $$ = $1 - $3; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | expr "\*" expr %left 50 { $$ = $1 * $3; }&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | expr "\/" expr %left 50 { $$ = $1 / $3; }&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | "(" expr ")" { $$ = $2; }&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | "[0-9]+" { $$ = Integer.parseInt($1); }</tt></pre>
</blockquote>
This will generate the class Calculator. To start it from another java
file, use something like the following:
<br>&nbsp;
<blockquote>
<pre>// need a catch statement because parse throws an exception in case anything fails
<tt>try
{
&nbsp;&nbsp;&nbsp; // of course, you can use any reader you want.
&nbsp;&nbsp;&nbsp; // even a reader that reads unicode strings will work just fine.
&nbsp;&nbsp;&nbsp; java.io.Reader in = new FileReader("test");

&nbsp;&nbsp;&nbsp; ...

&nbsp;&nbsp;&nbsp; // Create the calculator object and start it
&nbsp;&nbsp;&nbsp; Calculator calc = new Calculator();
&nbsp;&nbsp;&nbsp; int result = calc.parse(in);

&nbsp;&nbsp;&nbsp; ...

}&nbsp;
catch (Exception e)
{
&nbsp;&nbsp;&nbsp; ...
}</tt></pre>
</blockquote>
In this example, you start the parser with the contents of the file "test".
The calculated value according to the grammar will be stored in result.
Note the return type of parse, int, is the same return type of expr.
<p>You can call the parse method as many times as you want. You can call
parse even from two or more threads at the same time, because parse is
fully multithread safe, as long as the semantic actions are MT-safe like
in this example.
<p>In case you have multiple starting points, you can use the methods parse0,
parse1, parse2, ... to start from the desired symbol.
<br>&nbsp;
</body>
</html>
